<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="UTF-8">
    <title>M2 by attilai</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/main.css" media="screen">
    <script type='text/javascript' src='https://code.jquery.com/jquery-3.0.0.min.js'></script>
</head>
<body>
    <section class="page-header">
        <h1 class="project-name">Github test GH</h1>
        <h2 class="project-tagline">Hmm..</h2>
        <a href="https://github.com/attilai/m2" class="btn">View on GitHub</a>
        <a href="https://github.com/attilai/m2/zipball/master" class="btn">Download .zip</a>
        <a href="https://github.com/attilai/m2/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
        <div class="btn-container">
            <canvas></canvas>
            <a id="clear" class="btn download-canvas">Clear</a>
        </div>


        <div id="main-block">
            Test block
        </div>

        <h1>
            <a id="test-2-" class="anchor" href="#test-2-" aria-hidden="true">
                <span aria-hidden="true" class="octicon octicon-link"></span>
            </a>
            Test 2
        </h1>

        <footer class="site-footer">
            <span class="site-footer-owner"><a href="https://github.com/attilai/m2">M2</a> is maintained by <a
                    href="https://github.com/attilai">attilai</a>.</span>

            <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a
                    href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a
                    href="https://twitter.com/jasonlong">Jason Long</a>.</span>
        </footer>

    </section>

</body>
<script>
    (function( $j ) {
        var list = $j(".list");
        $j("#main-block").on('click', function(){
            var lorem5 = "<ul class='list'>" +
                            "<li>Lorem ipsum dolor sit amet.</li>" +
                            "<li>Eos nobis nulla optio quae.</li>" +
                            "<li>Doloremque ipsum quos sapiente vero.</li>" +
                            "<li>Blanditiis culpa hic illum sint?</li>" +
                            "<li>Aperiam cum distinctio impedit quod?</li>" +
                        "</ul>";
            if (list.length == 0){
                $j(this).append(lorem5);
            }

            list.toggle();
        });

        // grab the canvas element, get the context for API access and
        // preset some variables
        var canvas = document.querySelector('canvas'),
                c = canvas.getContext('2d'),
                mouseX = 0,
                mouseY = 0,
                width = 300,
                height = 300,
                colour = 'hotpink',
                clearColour = 'white',
                mousedown = false;

        // resize the canvas
        canvas.width = width;
        canvas.height = height;

        var ClearCanvas = function (e) {
            c.fillStyle = clearColour;
            c.fillRect(0,0, width, height);
        };

        function draw() {
            if (mousedown) {
                // set the colour
                c.fillStyle = colour;
                // start a path and paint a circle of 20 pixels at the mouse position
                c.beginPath();
                c.arc(mouseX, mouseY, 10, 0, Math.PI * 2, true);
                c.closePath();
                c.fill();
            }
        }

// get the mouse position on the canvas (some browser trickery involved)
        canvas.addEventListener('mousemove', function (event) {
            if (event.offsetX) {
                mouseX = event.offsetX;
                mouseY = event.offsetY;
            } else {
                mouseX = event.pageX - event.target.offsetLeft;
                mouseY = event.pageY - event.target.offsetTop;
            }
            // call the draw function
            draw();
        }, false);

        var clearBtn = document.getElementById("clear");
        clearBtn.addEventListener('click', ClearCanvas, false);

        canvas.addEventListener('mousedown', function (event) {
            mousedown = true;
        }, false);
        canvas.addEventListener('mouseup', function (event) {
            mousedown = false;
        }, false);

        var link = document.createElement('a');
        link.classList.add("download-canvas");
        link.classList.add("btn");
        link.innerHTML = 'download image';
        link.addEventListener('click', function (ev) {
            link.href = canvas.toDataURL('image/jpg');
            link.download = "mypainting.jpg";
        }, false);
        $j('.btn-container').prepend(link);
    })(jQuery);
</script>

</html>